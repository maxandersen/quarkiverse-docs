<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Agent and Tools :: Quarkiverse Documentation</title>
    <link rel="canonical" href="https://docs.quarkiverse.io/quarkus-langchain4j/dev/agent-and-tools.html">
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../_/css/site.css">
<!-- This wasn't displaying icons, and it was breaking the fonts on the admonitions   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">-->
    <script>var uiRootPath = '../../_'</script>
<link rel="icon" href="../../_/img/favicon-32x32.png" type="image/png">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
        <a class="navbar-item" href="https://docs.quarkiverse.io"><img src="../../_/img/quarkiverse_logo_horizontal_reverse.svg" alt="Quarkiverse Documentation" height="30"></a>
        <a class="navbar-item" href="https://docs.quarkiverse.io">Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Learn</div>
            <div class="navbar-dropdown">
            <a class="navbar-item" href="http://quarkus.io/get-started">Get Started</a>
              <a class="navbar-item" href="http://quarkus.io/guides">Guides</a>
              <a class="navbar-item" href="http://quarkus.io/training">Training</a>
              <a class="navbar-item" href="http://quarkus.io/qtips">
                "Q" Tip Videos
              </a>
              <a class="navbar-item" href="http://quarkus.io/books">Books</a>
            </div>
          </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Extensions</div>
            <div class="navbar-dropdown">
            <a class="navbar-item" href="https://quarkus.io/extensions">Browse Extensions</a>
                <a class="navbar-item" href="https://quarkus.io/faq/#what-is-a-quarkus-extension">Use Extensions</a>
                <a class="navbar-item" href="https://quarkus.io/guides/writing-extensions">
                  Create Extensions
                </a>
              <a class="navbar-item" href="https://hub.quarkiverse.io">
                Share Extensions
              </a>
            </div>
          </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Community</div>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://quarkusio.zulipchat.com">Chat</a>
            <a class="navbar-item" href="http://quarkus.io/support/">Support</a>
            <a class="navbar-item" href="http://quarkus.io/blog">Blog</a>
            <a class="navbar-item" href="http://quarkus.io/discussion">Discussion</a>
            <a class="navbar-item" href="http://quarkus.io/insights">Podcast</a>
            <a class="navbar-item" href="http://quarkus.io/events">Events</a>
            <a class="navbar-item" href="http://quarkus.io/newsletter">
              Newsletter
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="quarkus-langchain4j" data-version="dev">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
<!--  placeholder toolbar to align with main toolbar-->
  <div class="toolbar" style="position: static"></div>
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">LangChain4j</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Getting started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">AI Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ai-services.html">AI Services</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="agent-and-tools.html">Agent and Tools</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="retrievers.html">Embeddings and Document Retrievers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="prompt-engineering.html">Prompt Engineering 101</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">LLMs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="llms.html">LLMs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="openai.html">OpenAI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="huggingface.html">HuggingFace</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Document Stores</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="redis-store.html">Redis Store</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="chroma-store.html">Chroma Store</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pinecone-store.html">Pinecone Store</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pgvector-store.html">PgVector (PostgreSQL) Store</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="in-process-embedding.html">In-Process Embeddings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="csv.html">Loading CSV files</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Additional tools</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dev-ui.html">Dev UI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Advanced topics</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fault-tolerance.html">Fault Tolerance</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
        <div class="context">
          <span class="title">LangChain4j</span>
          <span class="version">dev</span>
        </div>
  <ul class="components">
        <li class="component">
        <a class="title" href="../../quarkus-amazon-alexa/dev/index.html">Amazon Alexa</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-amazon-alexa/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-amazon-services/dev/index.html">Amazon Services</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-amazon-services/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-amazon-services/2.4.x/index.html">2.4.x</a>
          </li>
          <li class="version">
            <a href="../../quarkus-amazon-services/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-antivirus/dev/index.html">Antivirus</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-antivirus/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-apistax/dev/index.html">APIstax</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-apistax/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-artemis/dev/index.html">Artemis</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-artemis/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-artemis/3.0.x/index.html">3.0.x</a>
          </li>
          <li class="version">
            <a href="../../quarkus-artemis/2.x/index.html">2.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-asyncapi/dev/index.html">AsyncApi</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-asyncapi/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-azure-services/dev/index.html">Azure Services</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-azure-services/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-bucket4j/dev/index.html">Bucket4j</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-bucket4j/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-certmanager/dev/index.html">Cert-Manager</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-certmanager/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-config-extensions/dev/index.html">Config Extensions</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-config-extensions/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-couchbase/dev/index.html">Couchbase</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-couchbase/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-cucumber/dev/index.html">Cucumber</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-cucumber/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-cxf/dev/index.html">CXF</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-cxf/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-cxf/2.2/index.html">2.2</a>
          </li>
          <li class="version">
            <a href="../../quarkus-cxf/1.5/index.html">1.5</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-dapr/dev/index.html">Dapr</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-dapr/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-dashbuilder/dev/index.html">Dashbuilder</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-dashbuilder/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-discord4j/dev/index.html">Discord4J</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-discord4j/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-embedded-postgresql/dev/index.html">Embedded Postgresql</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-embedded-postgresql/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-file-vault/dev/index.html">File Vault</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-file-vault/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-freemarker/dev/index.html">Freemarker</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-freemarker/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-github-action/dev/index.html">GitHub Action</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-github-action/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-github-app/dev/index.html">GitHub App</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-github-app/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-google-cloud-services/main/index.html">Google Cloud Services</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-google-cloud-services/main/index.html">main</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-groovy/dev/index.html">Groovy</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-groovy/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-helm/dev/index.html">Helm</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-helm/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-hibernate-search-extras/dev/index.html">Hibernate Search Extras</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-hibernate-search-extras/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-hibernate-search-extras/3.x/index.html">3.x</a>
          </li>
          <li class="version">
            <a href="../../quarkus-hibernate-search-extras/2.x/index.html">2.x</a>
          </li>
          <li class="version">
            <a href="../../quarkus-hibernate-search-extras/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-hibernate-types/dev/index.html">Hibernate types</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-hibernate-types/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-hivemq-client/dev/index.html">HiveMQ Client</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-hivemq-client/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-ironjacamar/dev/index.html">IronJacamar</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-ironjacamar/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-itext/dev/index.html">Itext</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-itext/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jackson-jq/dev/index.html">Jackson Jq</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jackson-jq/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jaeger/dev/index.html">Jaeger</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jaeger/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-java-embedded-framework/dev/index.html">Java Embedded Framework</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-java-embedded-framework/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jdbc-clickhouse/dev/index.html">JDBC Clickhouse</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jdbc-clickhouse/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jdbc-sqlite/dev/index.html">JDBC Sqlite</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jdbc-sqlite/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jdbi/dev/index.html">Jdbi</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jdbi/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jgit/dev/index.html">JGit</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jgit/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jgrapht/dev/index.html">JGraphT</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jgrapht/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jnosql/dev/index.html">Jnosql</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jnosql/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jpastreamer/dev/index.html">JPAStreamer</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jpastreamer/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-jpastreamer/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jsch/dev/index.html">JSch</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jsch/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-kerberos/dev/index.html">Kerberos</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-kerberos/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-kiota/dev/index.html">Kiota</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-kiota/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component is-current">
        <a class="title" href="index.html">LangChain4j</a>
        <ul class="versions">
          <li class="version is-current is-latest">
            <a href="index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-logging-json/dev/index.html">Logging JSON</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-logging-json/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-logging-logback/dev/index.html">Logging Logback</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-logging-logback/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-logging-sentry/dev/index.html">Logging Sentry</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-logging-sentry/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-logging-splunk/dev/index.html">Logging Splunk</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-logging-splunk/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-mailpit/dev/index.html">Mailpit</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-mailpit/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-pooled-jms/dev/index.html">Messaginghub Pooled JMS</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-pooled-jms/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-pooled-jms/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-micrometer-registry/dev/index.html">Micrometer Registry extensions</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-micrometer-registry/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-micrometer-registry/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-minio/dev/index.html">Min.io</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-minio/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-minio/v2.9.x/index.html">v2.9.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-mockk/dev/index.html">Mockk</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-mockk/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-mockserver/dev/index.html">Mockserver</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-mockserver/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-mockserver/0.x/index.html">0.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-mybatis/dev/index.html">MyBatis</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-mybatis/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-mybatis/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-neo4j/dev/index.html">Neo4j</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-neo4j/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-omnifaces/dev/index.html">Omnifaces</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-omnifaces/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-openapi-generator/dev/index.html">Openapi Generator</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-openapi-generator/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-openfga-client/dev/index.html">OpenFGA Client</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-openfga-client/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-opensearch/dev/index.html">Opensearch</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-opensearch/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-operator-sdk/dev/index.html">Operator SDK</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-operator-sdk/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-pact/dev/index.html">Pact</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-pact/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-pact/0.x/index.html">0.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-pdfbox/dev/index.html">PDFBox</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-pdfbox/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-playwright/dev/index.html">Playwright</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-playwright/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-poi/dev/index.html">POI</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-poi/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-poi/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-prettytime/dev/index.html">Prettytime</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-prettytime/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-primefaces/dev/index.html">PrimeFaces</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-primefaces/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-kafka-streams-processor/dev/index.html">Quarkus Kafka Streams Processor</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-kafka-streams-processor/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-quinoa/dev/index.html">Quinoa</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-quinoa/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-qute-web/dev/index.html">Qute Web</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-qute-web/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-rabbitmq-client/dev/index.html">RabbitMQ Client</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-rabbitmq-client/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-reactive-messaging-http/dev/index.html">Reactive Messaging HTTP</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-reactive-messaging-http/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-reactive-messsaging-nats-jetstream/dev/index.html">Reactive Messsaging Nats Jetstream</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-reactive-messsaging-nats-jetstream/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-renarde/dev/index.html">Renarde</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-renarde/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-renarde/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-scala3/dev/index.html">Scala 3</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-scala3/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-shardingsphere-jdbc/dev/index.html">Shardingsphere JDBC</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-shardingsphere-jdbc/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-smallrye-opentracing/dev/index.html">SmallRye OpenTracing</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-smallrye-opentracing/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-systemd-notify/dev/index.html">Systemd Notify</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-systemd-notify/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-tika/dev/index.html">Tika</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-tika/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-tika/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-unleash/dev/index.html">Unleash</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-unleash/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-unleash/0.x/index.html">0.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-vault/dev/index.html">Vault</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-vault/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-web-bundler/dev/index.html">Web Bundler</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-web-bundler/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-wiremock/dev/index.html">WireMock</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-wiremock/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-wiremock/0.x/index.html">0.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-zanzibar/dev/index.html">Zanzibar</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-zanzibar/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-zeebe/dev/index.html">Zeebe</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-zeebe/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-zeebe/0.x/index.html">0.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-zookeeper-client/dev/index.html">Zookeeper Client</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-zookeeper-client/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index/explore/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">LangChain4j</a></li>
    <li>AI Services</li>
    <li><a href="agent-and-tools.html">Agent and Tools</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/quarkiverse/quarkus-langchain4j/edit/main/docs/modules/ROOT/pages/agent-and-tools.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Agent and Tools</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The core premise of agents involves employing a language model to discern a sequence of actions.
Unlike <em>chains</em>, where actions are hardcoded, agents utilize a language model as a reasoning engine to determine the actions (<em>tools</em>) and their sequence.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concepts"><a class="anchor" href="#_concepts"></a>Concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_agent"><a class="anchor" href="#_agent"></a>Agent</h3>
<div class="paragraph">
<p>The agent is the core decision-maker responsible for determining the subsequent steps. It&#8217;s driven by a language model and a prompt. The inputs include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tools: Descriptions of available actions</p>
</li>
<li>
<p>User Input: The high-level objective</p>
</li>
<li>
<p>Intermediate Steps: Previous (action, tool output) pairs executed in the order to fulfill the user input</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The output presents the next action(s) to take or the final response to be delivered to the user. Each action specifies a tool (method name) and its corresponding input parameters.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tools"><a class="anchor" href="#_tools"></a>Tools</h3>
<div class="paragraph">
<p>Tools are the methods an agent can invoke. Two elements are essential when using tools:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Granting the agent access to the right tools.</p>
</li>
<li>
<p>Describing tools in a manner most beneficial to the agent.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Failure to consider both aspects may hinder the agent&#8217;s functionality. Access to an incorrect set of tools impedes the agent from achieving objectives, while improperly described tools hamper their effective utilization.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_recommendations_for_agent_construction"><a class="anchor" href="#_recommendations_for_agent_construction"></a>Recommendations for Agent Construction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When constructing an agent, consider:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Setting the model temperature to 0 for the agent to consistently choose the most probable action.</p>
</li>
<li>
<p>Ensuring well-detailed descriptions of tools.</p>
</li>
<li>
<p>Listing steps in the prompt in the desired execution order.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_declaring_a_tool"><a class="anchor" href="#_declaring_a_tool"></a>Declaring a Tool</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <em>tool</em> denotes a method accessible by an agent. It must be part of a CDI bean and have at least one method annotated with <code>@Tool</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Example of an EmailService tool method
package io.quarkiverse.langchain4j.sample;

import jakarta.enterprise.context.ApplicationScoped;
import jakarta.inject.Inject;

import dev.langchain4j.agent.tool.Tool;
import io.quarkus.logging.Log;
import io.quarkus.mailer.Mail;
import io.quarkus.mailer.Mailer;

@ApplicationScoped
public class EmailService {

    @Inject
    Mailer mailer;

    @Tool("send the provided content via email")
    public void sendAnEmail(String content) {
        Log.info("Sending an email: " + content);
        mailer.send(Mail.withText("sendMeALetter@quarkus.io", "A poem for you", content));
    }

}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
A CDI bean can host multiple methods annotated with <code>@Tool</code>.
However, ensure each method name is unique among all declared tools.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_providing_tool_access"><a class="anchor" href="#_providing_tool_access"></a>Providing Tool Access</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the <a href="ai-services.html" class="xref page">AI Service</a>, you can specify the tools accessible to the agent. By default, <strong>no tools</strong> are available. Hence, ensure to define the list of tools you wish to make accessible:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RegisterAiService(tools = EmailService.class)
public interface MyAiService {
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When employing tools, configuring the memory provider is necessary. Since tools necessitate a sequence of messages, maintaining this conversation is essential. A minimum memory of three messages is necessary for optimal tool functionality.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_do_tools_work"><a class="anchor" href="#_how_do_tools_work"></a>How do tools work?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The question of how tools work naturally arises given the fact that no code needs to be written that wires up their usage.</p>
</div>
<div class="paragraph">
<p>The short answer is by providing the proper user and system messages and tool descriptions, the extension is able to craft
API requests that allow the LLM to respond back with the proper tool invocations - but it is the extension itself then proceeds to invoke the tool.
The result of the invocation is then used by the extension to make another request to the LLM which will then response with a new answer, potentially leading to another round of a tool invocation and the crafting of a new request to the LLM.</p>
</div>
<div class="sect2">
<h3 id="_detailed_example"><a class="anchor" href="#_detailed_example"></a>Detailed example</h3>
<div class="paragraph">
<p>To help clarify the various interactions, let&#8217;s use the following example where we are creating a very simple calculator chatbot that responds to user requests over HTTP, leveraging the <code>quarkus-langchain4j-openai</code> extension.
Here is the full source code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

import jakarta.annotation.PreDestroy;
import jakarta.enterprise.context.RequestScoped;
import jakarta.inject.Singleton;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

import org.jboss.resteasy.reactive.RestQuery;

import dev.langchain4j.agent.tool.Tool;
import dev.langchain4j.memory.ChatMemory;
import dev.langchain4j.memory.chat.ChatMemoryProvider;
import io.quarkiverse.langchain4j.RegisterAiService;
import io.quarkiverse.langchain4j.RemovableChatMemoryProvider;

@Path("assistant-with-tool")
public class AssistantWithToolsResource {

    private final Assistant assistant;

    public AssistantWithToolsResource(Assistant assistant) {
        this.assistant = assistant;
    }

    @GET  <i class="conum" data-value="3"></i><b>(3)</b>
    public String get(@RestQuery String message) {
        return assistant.chat(message);
    }

    @Singleton <i class="conum" data-value="1"></i><b>(1)</b>
    public static class Calculator {

        @Tool("Calculates the length of a string")
        int stringLength(String s) {
            return s.length();
        }

        @Tool("Calculates the sum of two numbers")
        int add(int a, int b) {
            return a + b;
        }

        @Tool("Calculates the square root of a number")
        double sqrt(int x) {
            return Math.sqrt(x);
        }
    }

    @RegisterAiService(tools = Calculator.class) <i class="conum" data-value="2"></i><b>(2)</b>
    public interface Assistant {

        String chat(String userMessage);
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declare a CDI bean that provides three different tools</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Register an AiService that responds to a user&#8217;s request and has access to the calculator tools. This service is also able to keep track of the session&#8217;s messages using the CDI message store declared above.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Declare an HTTP endpoint that retrieves the user&#8217;s question via a query parameter and simply responds with chatbot&#8217;s response</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now, if we ask the chatbot <code>What is the square root of the sum of the numbers of letters in the words "hello" and "world"</code> via:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl 'http://localhost:8080/assistant-with-tool?message=What%20is%20the%20square%20root%20of%20the%20sum%20of%20the%20numbers%20of%20letters%20in%20the%20words%20%22hello%22%20and%20%22world%22'</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response will be <code>The square root of the sum of the numbers of letters in the words "hello" and "world" is approximately 3.162.</code></p>
</div>
<div class="paragraph">
<p>What is interesting however in understanding how the tools were used, is seeing the requests the extension has made to OpenAI and the responses the latter provides.</p>
</div>
<div class="paragraph">
<p>The application makes a first REST call to OpenAI that contains the following JSON payload:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "model": "gpt-3.5-turbo",
  "messages": [
    {
      "role": "user",
      "content": "What is the square root of the sum of the numbers of letters in the words \"hello\" and \"world\""
    }
  ],
  "temperature": 1.0,
  "top_p": 1.0,
  "presence_penalty": 0.0,
  "frequency_penalty": 0.0,
  "functions": [
    {
      "name": "stringLength",
      "description": "Calculates the length of a string",
      "parameters": {
        "type": "object",
        "properties": {
          "s": {
            "type": "string"
          }
        },
        "required": [
          "s"
        ]
      }
    },
    {
      "name": "add",
      "description": "Calculates the sum of two numbers",
      "parameters": {
        "type": "object",
        "properties": {
          "a": {
            "type": "integer"
          },
          "b": {
            "type": "integer"
          }
        },
        "required": [
          "a",
          "b"
        ]
      }
    },
    {
      "name": "sqrt",
      "description": "Calculates the square root of a number",
      "parameters": {
        "type": "object",
        "properties": {
          "x": {
            "type": "integer"
          }
        },
        "required": [
          "x"
        ]
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are two things to notice in this JSON payload:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The user message which contains the user&#8217;s question (the <code>messages</code> part of the request)</p>
</li>
<li>
<p>The declaration of the three available functions (the <code>functions</code> part of the request) which directly map to the tools we declared in our source code.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The response from OpenAI is the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "id": "chatcmpl-8L3uhmaMARLTbpGJGDvFW4pAPxM8V",
  "object": "chat.completion",
  "created": 1700030623,
  "model": "gpt-3.5-turbo-0613",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": null,
        "function_call": {
          "name": "stringLength",
          "arguments": "{\n  \"s\": \"hello\"\n}"
        }
      },
      "finish_reason": "function_call"
    }
  ],
  "usage": {
    "prompt_tokens": 118,
    "completion_tokens": 15,
    "total_tokens": 133
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This response initially looks odd as it does not look like OpenAI has responded to user&#8217;s question.
However, upon closer inspection we see that the response contains something very interesting and that is the <code>function_call</code> part.
In this part OpenAI is essentially telling the extension to invoke the <code>stringLength</code> tool with <code>hello</code> as the sole parameter.
This is where the power of the LLM is evident - it has essentially figured out that to answer the user&#8217;s question, it first needs to calculate the length of <code>"hello"</code>.</p>
</div>
<div class="paragraph">
<p>Upon receiving this response, the extension invokes <code>calculator.stringLength("hello")</code> and then sends the following new request to OpenAI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "model": "gpt-3.5-turbo",
  "messages": [
    {
      "role": "user",
      "content": "What is the square root of the sum of the numbers of letters in the words \"hello\" and \"world\""
    },
    {
      "role": "assistant",
      "content": null,
      "function_call": {
        "name": "stringLength",
        "arguments": "{\n  \"s\": \"hello\"\n}"
      }
    },
    {
      "role": "function",
      "content": "5",
      "name": "stringLength"
    }
  ],
  "temperature": 1.0,
  "top_p": 1.0,
  "presence_penalty": 0.0,
  "frequency_penalty": 0.0,
  "functions": [
    {
      "name": "stringLength",
      "description": "Calculates the length of a string",
      "parameters": {
        "type": "object",
        "properties": {
          "s": {
            "type": "string"
          }
        },
        "required": [
          "s"
        ]
      }
    },
    {
      "name": "add",
      "description": "Calculates the sum of two numbers",
      "parameters": {
        "type": "object",
        "properties": {
          "a": {
            "type": "integer"
          },
          "b": {
            "type": "integer"
          }
        },
        "required": [
          "a",
          "b"
        ]
      }
    },
    {
      "name": "sqrt",
      "description": "Calculates the square root of a number",
      "parameters": {
        "type": "object",
        "properties": {
          "x": {
            "type": "integer"
          }
        },
        "required": [
          "x"
        ]
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>What is very important to notice here is that the extension is sending not only has the user&#8217;s question,
but also the LLM&#8217;s first response requesting a tool invocation, along with a new message containing the result of the said invocation.
Recall that LLMs are stateless, therefore the entire message history needs to be sent each time - this is the reason why the use of tools
requires a chat memory.</p>
</div>
<div class="paragraph">
<p>OpenAI now responds with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "id": "chatcmpl-8L3ukBR1Pblqn4g5m3JocHQVzYqMy",
  "object": "chat.completion",
  "created": 1700030626,
  "model": "gpt-3.5-turbo-0613",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": null,
        "function_call": {
          "name": "stringLength",
          "arguments": "{\n  \"s\": \"world\"\n}"
        }
      },
      "finish_reason": "function_call"
    }
  ],
  "usage": {
    "prompt_tokens": 142,
    "completion_tokens": 15,
    "total_tokens": 157
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once again we see the LLM can not yet answer the original user&#8217;s question, but instead instructs the extension to invoke a tool.</p>
</div>
<div class="paragraph">
<p>As you&#8217;d expect by now, the extension does just that and sends the following new request to OpenAI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "model": "gpt-3.5-turbo",
  "messages": [
    {
      "role": "user",
      "content": "What is the square root of the sum of the numbers of letters in the words \"hello\" and \"world\""
    },
    {
      "role": "assistant",
      "content": null,
      "function_call": {
        "name": "stringLength",
        "arguments": "{\n  \"s\": \"hello\"\n}"
      }
    },
    {
      "role": "function",
      "content": "5",
      "name": "stringLength"
    },
    {
      "role": "assistant",
      "content": null,
      "function_call": {
        "name": "stringLength",
        "arguments": "{\n  \"s\": \"world\"\n}"
      }
    },
    {
      "role": "function",
      "content": "5",
      "name": "stringLength"
    }
  ],
  "temperature": 1.0,
  "top_p": 1.0,
  "presence_penalty": 0.0,
  "frequency_penalty": 0.0,
  "functions": [
    {
      "name": "stringLength",
      "description": "Calculates the length of a string",
      "parameters": {
        "type": "object",
        "properties": {
          "s": {
            "type": "string"
          }
        },
        "required": [
          "s"
        ]
      }
    },
    {
      "name": "add",
      "description": "Calculates the sum of two numbers",
      "parameters": {
        "type": "object",
        "properties": {
          "a": {
            "type": "integer"
          },
          "b": {
            "type": "integer"
          }
        },
        "required": [
          "a",
          "b"
        ]
      }
    },
    {
      "name": "sqrt",
      "description": "Calculates the square root of a number",
      "parameters": {
        "type": "object",
        "properties": {
          "x": {
            "type": "integer"
          }
        },
        "required": [
          "x"
        ]
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This new request, in addition to the previous one sent to OpenAI, contains the result of the invocation of <code>calculator.stringLength("world")</code>.</p>
</div>
<div class="paragraph">
<p>In turn, OpenAI responds with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "id": "chatcmpl-8L3uopZa8wdBmGWoWBqWbCO8UdwVv",
  "object": "chat.completion",
  "created": 1700030630,
  "model": "gpt-3.5-turbo-0613",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": null,
        "function_call": {
          "name": "add",
          "arguments": "{\n  \"a\": 5,\n  \"b\": 5\n}"
        }
      },
      "finish_reason": "function_call"
    }
  ],
  "usage": {
    "prompt_tokens": 166,
    "completion_tokens": 21,
    "total_tokens": 187
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This time the LLM instructed the extension that it is time to invoke the <code>add</code> tool using <code>5</code> and <code>5</code> as arguments - these arguments of course are the results of the previous two <code>stringLength</code> invocations.</p>
</div>
<div class="paragraph">
<p>The extension upon receiving this response invoked <code>calculator.add(5,5)</code> and then crafts and sends the following message to OpenAI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "model": "gpt-3.5-turbo",
  "messages": [
    {
      "role": "user",
      "content": "What is the square root of the sum of the numbers of letters in the words \"hello\" and \"world\""
    },
    {
      "role": "assistant",
      "content": null,
      "function_call": {
        "name": "stringLength",
        "arguments": "{\n  \"s\": \"hello\"\n}"
      }
    },
    {
      "role": "function",
      "content": "5",
      "name": "stringLength"
    },
    {
      "role": "assistant",
      "content": null,
      "function_call": {
        "name": "stringLength",
        "arguments": "{\n  \"s\": \"world\"\n}"
      }
    },
    {
      "role": "function",
      "content": "5",
      "name": "stringLength"
    },
    {
      "role": "assistant",
      "content": null,
      "function_call": {
        "name": "add",
        "arguments": "{\n  \"a\": 5,\n  \"b\": 5\n}"
      }
    },
    {
      "role": "function",
      "content": "10",
      "name": "add"
    }
  ],
  "temperature": 1.0,
  "top_p": 1.0,
  "presence_penalty": 0.0,
  "frequency_penalty": 0.0,
  "functions": [
    {
      "name": "stringLength",
      "description": "Calculates the length of a string",
      "parameters": {
        "type": "object",
        "properties": {
          "s": {
            "type": "string"
          }
        },
        "required": [
          "s"
        ]
      }
    },
    {
      "name": "add",
      "description": "Calculates the sum of two numbers",
      "parameters": {
        "type": "object",
        "properties": {
          "a": {
            "type": "integer"
          },
          "b": {
            "type": "integer"
          }
        },
        "required": [
          "a",
          "b"
        ]
      }
    },
    {
      "name": "sqrt",
      "description": "Calculates the square root of a number",
      "parameters": {
        "type": "object",
        "properties": {
          "x": {
            "type": "integer"
          }
        },
        "required": [
          "x"
        ]
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response from OpenAI is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "id": "chatcmpl-8L3urz1QWWjh3Dzmjqu0O3hK16NUE",
  "object": "chat.completion",
  "created": 1700030633,
  "model": "gpt-3.5-turbo-0613",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": null,
        "function_call": {
          "name": "sqrt",
          "arguments": "{\n  \"x\": 10\n}"
        }
      },
      "finish_reason": "function_call"
    }
  ],
  "usage": {
    "prompt_tokens": 195,
    "completion_tokens": 14,
    "total_tokens": 209
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The LLM this time decided that the <code>sqrt</code> tool needs to be invoked.</p>
</div>
<div class="paragraph">
<p>The extension following this instruction invokes <code>calculator.sqrt(10)</code> (<code>10</code> being the result of the previous <code>add</code> invocation) then crafts and sends the following message to OpenAI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "model": "gpt-3.5-turbo",
  "messages": [
    {
      "role": "user",
      "content": "What is the square root of the sum of the numbers of letters in the words \"hello\" and \"world\""
    },
    {
      "role": "assistant",
      "content": null,
      "function_call": {
        "name": "stringLength",
        "arguments": "{\n  \"s\": \"hello\"\n}"
      }
    },
    {
      "role": "function",
      "content": "5",
      "name": "stringLength"
    },
    {
      "role": "assistant",
      "content": null,
      "function_call": {
        "name": "stringLength",
        "arguments": "{\n  \"s\": \"world\"\n}"
      }
    },
    {
      "role": "function",
      "content": "5",
      "name": "stringLength"
    },
    {
      "role": "assistant",
      "content": null,
      "function_call": {
        "name": "add",
        "arguments": "{\n  \"a\": 5,\n  \"b\": 5\n}"
      }
    },
    {
      "role": "function",
      "content": "10",
      "name": "add"
    },
    {
      "role": "assistant",
      "content": null,
      "function_call": {
        "name": "sqrt",
        "arguments": "{\n  \"x\": 10\n}"
      }
    },
    {
      "role": "function",
      "content": "3.1622776601683795",
      "name": "sqrt"
    }
  ],
  "temperature": 1.0,
  "top_p": 1.0,
  "presence_penalty": 0.0,
  "frequency_penalty": 0.0,
  "functions": [
    {
      "name": "stringLength",
      "description": "Calculates the length of a string",
      "parameters": {
        "type": "object",
        "properties": {
          "s": {
            "type": "string"
          }
        },
        "required": [
          "s"
        ]
      }
    },
    {
      "name": "add",
      "description": "Calculates the sum of two numbers",
      "parameters": {
        "type": "object",
        "properties": {
          "a": {
            "type": "integer"
          },
          "b": {
            "type": "integer"
          }
        },
        "required": [
          "a",
          "b"
        ]
      }
    },
    {
      "name": "sqrt",
      "description": "Calculates the square root of a number",
      "parameters": {
        "type": "object",
        "properties": {
          "x": {
            "type": "integer"
          }
        },
        "required": [
          "x"
        ]
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once again, it&#8217;s very important to note that entire chat history has been sent by the extension to OpenAI.
Using this entire chat history, the LLM is finally able to answer the original user&#8217;s question:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "id": "chatcmpl-8L3utMpnSKtgzWcmHJVwVJd36l9fk",
  "object": "chat.completion",
  "created": 1700030635,
  "model": "gpt-3.5-turbo-0613",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "The square root of the sum of the numbers of letters in the words \"hello\" and \"world\" is approximately 3.162."
      },
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 224,
    "completion_tokens": 29,
    "total_tokens": 253
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As seen above, the answer is <code>The square root of the sum of the numbers of letters in the words \"hello\" and \"world\" is approximately 3.162.</code> and that is what Quarkus will send back to the user as the HTTP response.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright (C) 2020-2024 <a href="https://www.redhat.com">Red Hat</a> and individual contributors to <a href="https://github.com/quarkiverse/">Quarkiverse</a>.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../_/js/vendor/fontawesome.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>

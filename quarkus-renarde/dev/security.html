<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Renarde  Web Framework Security guide :: Quarkiverse Documentation</title>
    <link rel="canonical" href="https://docs.quarkiverse.io/quarkus-renarde/dev/security.html">
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../_/css/site.css">
<!-- This wasn't displaying icons, and it was breaking the fonts on the admonitions   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">-->
    <script>var uiRootPath = '../../_'</script>
<link rel="icon" href="../../_/img/favicon-32x32.png" type="image/png">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
        <a class="navbar-item" href="https://docs.quarkiverse.io"><img src="../../_/img/quarkiverse_logo_horizontal_reverse.svg" alt="Quarkiverse Documentation" height="30"></a>
        <a class="navbar-item" href="https://docs.quarkiverse.io">Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Learn</div>
            <div class="navbar-dropdown">
            <a class="navbar-item" href="http://quarkus.io/get-started">Get Started</a>
              <a class="navbar-item" href="http://quarkus.io/guides">Guides</a>
              <a class="navbar-item" href="http://quarkus.io/training">Training</a>
              <a class="navbar-item" href="http://quarkus.io/qtips">
                "Q" Tip Videos
              </a>
              <a class="navbar-item" href="http://quarkus.io/books">Books</a>
            </div>
          </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Extensions</div>
            <div class="navbar-dropdown">
            <a class="navbar-item" href="https://quarkus.io/extensions">Browse Extensions</a>
                <a class="navbar-item" href="https://quarkus.io/faq/#what-is-a-quarkus-extension">Use Extensions</a>
                <a class="navbar-item" href="https://quarkus.io/guides/writing-extensions">
                  Create Extensions
                </a>
              <a class="navbar-item" href="https://hub.quarkiverse.io">
                Share Extensions
              </a>
            </div>
          </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Community</div>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://quarkusio.zulipchat.com">Chat</a>
            <a class="navbar-item" href="http://quarkus.io/support/">Support</a>
            <a class="navbar-item" href="http://quarkus.io/blog">Blog</a>
            <a class="navbar-item" href="http://quarkus.io/discussion">Discussion</a>
            <a class="navbar-item" href="http://quarkus.io/insights">Podcast</a>
            <a class="navbar-item" href="http://quarkus.io/events">Events</a>
            <a class="navbar-item" href="http://quarkus.io/newsletter">
              Newsletter
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="quarkus-renarde" data-version="dev">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
<!--  placeholder toolbar to align with main toolbar-->
  <div class="toolbar" style="position: static"></div>
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Renarde</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Getting started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="concepts.html">Main Concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="concepts.html#models">Models</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="concepts.html#controllers">Controllers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="concepts.html#views">Views</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="advanced.html">Advanced Guides</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="advanced.html#forms">Forms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="advanced.html#routing">Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="advanced.html#emails">Emails</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="advanced.html#localisation">Localisation / Internationalisation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="advanced.html#flash_scope">Flash Scope</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="advanced.html#htmx">htmx</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="advanced.html#generating_barcodes">Generating barcodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="advanced.html#generating_pdf_documents">Generating PDF</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="security.html">Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#csrf">CSRF</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#custom_authentication_with_jwt">Custom Auth (JWT)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#oidc">OIDC</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="config-reference.html">Config Reference</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
        <div class="context">
          <span class="title">Renarde</span>
          <span class="version">dev</span>
        </div>
  <ul class="components">
        <li class="component">
        <a class="title" href="../../quarkus-amazon-alexa/dev/index.html">Amazon Alexa</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-amazon-alexa/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-amazon-services/dev/index.html">Amazon Services</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-amazon-services/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-amazon-services/2.4.x/index.html">2.4.x</a>
          </li>
          <li class="version">
            <a href="../../quarkus-amazon-services/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-antivirus/dev/index.html">Antivirus</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-antivirus/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-apistax/dev/index.html">APIstax</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-apistax/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-artemis/dev/index.html">Artemis</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-artemis/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-artemis/3.0.x/index.html">3.0.x</a>
          </li>
          <li class="version">
            <a href="../../quarkus-artemis/2.x/index.html">2.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-asyncapi/dev/index.html">AsyncApi</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-asyncapi/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-azure-services/dev/index.html">Azure Services</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-azure-services/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-bucket4j/dev/index.html">Bucket4j</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-bucket4j/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-certmanager/dev/index.html">Cert-Manager</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-certmanager/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-config-extensions/dev/index.html">Config Extensions</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-config-extensions/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-couchbase/dev/index.html">Couchbase</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-couchbase/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-cucumber/dev/index.html">Cucumber</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-cucumber/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-cxf/dev/index.html">CXF</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-cxf/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-cxf/2.2/index.html">2.2</a>
          </li>
          <li class="version">
            <a href="../../quarkus-cxf/1.5/index.html">1.5</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-dapr/dev/index.html">Dapr</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-dapr/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-dashbuilder/dev/index.html">Dashbuilder</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-dashbuilder/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-discord4j/dev/index.html">Discord4J</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-discord4j/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-embedded-postgresql/dev/index.html">Embedded Postgresql</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-embedded-postgresql/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-file-vault/dev/index.html">File Vault</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-file-vault/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-freemarker/dev/index.html">Freemarker</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-freemarker/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-github-action/dev/index.html">GitHub Action</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-github-action/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-github-app/dev/index.html">GitHub App</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-github-app/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-google-cloud-services/main/index.html">Google Cloud Services</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-google-cloud-services/main/index.html">main</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-groovy/dev/index.html">Groovy</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-groovy/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-helm/dev/index.html">Helm</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-helm/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-hibernate-search-extras/dev/index.html">Hibernate Search Extras</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-hibernate-search-extras/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-hibernate-search-extras/3.x/index.html">3.x</a>
          </li>
          <li class="version">
            <a href="../../quarkus-hibernate-search-extras/2.x/index.html">2.x</a>
          </li>
          <li class="version">
            <a href="../../quarkus-hibernate-search-extras/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-hibernate-types/dev/index.html">Hibernate types</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-hibernate-types/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-hivemq-client/dev/index.html">HiveMQ Client</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-hivemq-client/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-ironjacamar/dev/index.html">IronJacamar</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-ironjacamar/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-itext/dev/index.html">Itext</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-itext/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jackson-jq/dev/index.html">Jackson Jq</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jackson-jq/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jaeger/dev/index.html">Jaeger</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jaeger/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-java-embedded-framework/dev/index.html">Java Embedded Framework</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-java-embedded-framework/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jdbc-clickhouse/dev/index.html">JDBC Clickhouse</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jdbc-clickhouse/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jdbc-sqlite/dev/index.html">JDBC Sqlite</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jdbc-sqlite/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jdbi/dev/index.html">Jdbi</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jdbi/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jgit/dev/index.html">JGit</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jgit/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jgrapht/dev/index.html">JGraphT</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jgrapht/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jnosql/dev/index.html">Jnosql</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jnosql/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jpastreamer/dev/index.html">JPAStreamer</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jpastreamer/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-jpastreamer/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-jsch/dev/index.html">JSch</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-jsch/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-kerberos/dev/index.html">Kerberos</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-kerberos/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-kiota/dev/index.html">Kiota</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-kiota/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-langchain4j/dev/index.html">LangChain4j</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-langchain4j/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-logging-json/dev/index.html">Logging JSON</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-logging-json/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-logging-logback/dev/index.html">Logging Logback</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-logging-logback/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-logging-sentry/dev/index.html">Logging Sentry</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-logging-sentry/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-logging-splunk/dev/index.html">Logging Splunk</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-logging-splunk/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-mailpit/dev/index.html">Mailpit</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-mailpit/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-pooled-jms/dev/index.html">Messaginghub Pooled JMS</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-pooled-jms/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-pooled-jms/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-micrometer-registry/dev/index.html">Micrometer Registry extensions</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-micrometer-registry/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-micrometer-registry/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-minio/dev/index.html">Min.io</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-minio/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-minio/v2.9.x/index.html">v2.9.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-mockk/dev/index.html">Mockk</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-mockk/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-mockserver/dev/index.html">Mockserver</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-mockserver/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-mockserver/0.x/index.html">0.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-mybatis/dev/index.html">MyBatis</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-mybatis/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-mybatis/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-neo4j/dev/index.html">Neo4j</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-neo4j/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-omnifaces/dev/index.html">Omnifaces</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-omnifaces/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-openapi-generator/dev/index.html">Openapi Generator</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-openapi-generator/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-openfga-client/dev/index.html">OpenFGA Client</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-openfga-client/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-opensearch/dev/index.html">Opensearch</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-opensearch/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-operator-sdk/dev/index.html">Operator SDK</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-operator-sdk/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-pact/dev/index.html">Pact</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-pact/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-pact/0.x/index.html">0.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-pdfbox/dev/index.html">PDFBox</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-pdfbox/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-playwright/dev/index.html">Playwright</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-playwright/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-poi/dev/index.html">POI</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-poi/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-poi/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-prettytime/dev/index.html">Prettytime</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-prettytime/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-primefaces/dev/index.html">PrimeFaces</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-primefaces/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-kafka-streams-processor/dev/index.html">Quarkus Kafka Streams Processor</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-kafka-streams-processor/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-quinoa/dev/index.html">Quinoa</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-quinoa/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-qute-web/dev/index.html">Qute Web</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-qute-web/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-rabbitmq-client/dev/index.html">RabbitMQ Client</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-rabbitmq-client/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-reactive-messaging-http/dev/index.html">Reactive Messaging HTTP</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-reactive-messaging-http/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-reactive-messsaging-nats-jetstream/dev/index.html">Reactive Messsaging Nats Jetstream</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-reactive-messsaging-nats-jetstream/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component is-current">
        <a class="title" href="index.html">Renarde</a>
        <ul class="versions">
          <li class="version is-current is-latest">
            <a href="index.html">dev</a>
          </li>
          <li class="version">
            <a href="../1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-scala3/dev/index.html">Scala 3</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-scala3/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-shardingsphere-jdbc/dev/index.html">Shardingsphere JDBC</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-shardingsphere-jdbc/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-smallrye-opentracing/dev/index.html">SmallRye OpenTracing</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-smallrye-opentracing/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-systemd-notify/dev/index.html">Systemd Notify</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-systemd-notify/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-tika/dev/index.html">Tika</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-tika/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-tika/1.x/index.html">1.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-unleash/dev/index.html">Unleash</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-unleash/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-unleash/0.x/index.html">0.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-vault/dev/index.html">Vault</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-vault/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-web-bundler/dev/index.html">Web Bundler</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-web-bundler/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-wiremock/dev/index.html">WireMock</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-wiremock/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-wiremock/0.x/index.html">0.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-zanzibar/dev/index.html">Zanzibar</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-zanzibar/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-zeebe/dev/index.html">Zeebe</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-zeebe/dev/index.html">dev</a>
          </li>
          <li class="version">
            <a href="../../quarkus-zeebe/0.x/index.html">0.x</a>
          </li>
        </ul>
      </li>
        <li class="component">
        <a class="title" href="../../quarkus-zookeeper-client/dev/index.html">Zookeeper Client</a>
        <ul class="versions">
          <li class="version is-latest">
            <a href="../../quarkus-zookeeper-client/dev/index.html">dev</a>
          </li>
        </ul>
      </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index/explore/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Renarde</a></li>
    <li><a href="security.html">Security</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">dev</button>
  <div class="version-menu">
        <a class="version is-current" href="security.html">dev</a>
        <a class="version" href="../1.x/security.html">1.x</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/quarkiverse/quarkus-renarde/edit/main/docs/modules/ROOT/pages/security.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Renarde <span class="image"><img src="_images/renarde-head.svg" alt="renarde head" width="25em"></span> Web Framework Security guide</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Renarde <span class="image"><img src="_images/renarde-head.svg" alt="renarde head" width="15em"></span> can help you deal with security and user registration, either manually, using OIDC, or
a mix of both.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="csrf"><a class="anchor" href="#csrf"></a>CSRF</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Renarde comes with built-in support for <a href="https://owasp.org/www-community/attacks/csrf">Cross-Site Request Forgery (CSRF)</a> protection,
via the (already imported) <a href="https://quarkus.io/guides/security-csrf-prevention"><code>quarkus-csrf-reactive</code></a> module dependency.</p>
</div>
<div class="paragraph">
<p>To be safe, make sure that all your <code>GET</code>, <code>HEAD</code> and <code>OPTIONS</code> endpoints do not alter application state, and
always include a CSRF token to your <code>POST</code>, <code>PUT</code>, <code>DELETE</code> (and other) endpoints. On your endpoint side, you
do not need to do anything, we will check the token for you. But on your form end, you need to include the CSRF
token, which can be done by using the <a href="index.html#renarde-tags" class="xref page"><code>{#form/}</code></a> tag to create your form, or the
<a href="index.html#renarde-tags" class="xref page"><code>{#authenticityToken/}</code></a> to generate a hidden form element with the token, or by writing
the form element manually:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;input type="hidden" name="{inject:csrf.parameterName}" value="{inject:csrf.token}"/&gt;</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_tests_when_using_csrf"><a class="anchor" href="#_tests_when_using_csrf"></a>Tests when using CSRF</h3>
<div class="paragraph">
<p>When writing tests, if you are using <a href="https://quarkus.io/guides/getting-started-testing"><code>@QuarkusTest</code></a> and
<a href="https://rest-assured.io/"><code>RestAssured</code></a> to test endpoints secured with CSRF protection,
you will need to make sure you obtain and pass the appropriate CSRF token to your <code>POST</code> (and similar) endpoints.</p>
</div>
<div class="paragraph">
<p>There are two ways to deal with this.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_easy_way"><a class="anchor" href="#_the_easy_way"></a>The easy way</h3>
<div class="paragraph">
<p>Import the <code>quarkus-renarde-test</code> module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;io.quarkiverse.renarde&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-renarde-test&lt;/artifactId&gt;
  &lt;version&gt;3.0.7&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will automatically register a <a href="https://junit.org/junit5/docs/current/user-guide/#extensions-registration-automatic">JUnit Extension</a>
which makes sure <code>RestAssured</code> has a filter set up for each of your
test methods, which will pass a generated valid CSRF token as both cookie and form parameter. Not that this is only
done for <code>POST</code> (and related) methods which contain either no body, or a form body
(<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST">url-encoded or multipart</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
you can use the <code>@DisableCSRFFilter</code> annotation on your test method or class in order to disable the CSRF
filter. For example, if you want to handle it yourself.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_the_hard_way"><a class="anchor" href="#_the_hard_way"></a>The hard way</h3>
<div class="paragraph">
<p>You will need to obtain a CSRF token from any <code>GET</code> endpoint, and resend it as part of your <code>POST</code> requests:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Test
public void test() {
  String csrfToken = RestAssured
    .given()
    .when()
    .get("/Application/index")
    .then()
    .extract().cookie("csrf-token");
  // now we can call POST
  RestAssured
    .given()
    .when()
    // for CSRF protection
    .cookie("csrf-token", csrfToken)
    .param("csrf-token", csrfToken)
    // for your actual endpoint
    .param("param", "value")
    .post("/Application/doSomething")
    .then()
    .statusCode(200);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="custom_authentication_with_jwt"><a class="anchor" href="#custom_authentication_with_jwt"></a>Custom authentication with JWT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to handle your own authentication by storing users in your database, you can use <a href="https://datatracker.ietf.org/doc/html/rfc7519">JWT tokens</a>.
Start with importing the <code>renarde-security</code> module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;io.quarkiverse.renarde&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-renarde-security&lt;/artifactId&gt;
  &lt;version&gt;3.0.7&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>And set those configuration values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Must be set to get proper error reporting
quarkus.http.auth.proactive=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your entity should extend <code>RenardeUser</code> and can look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package model;

import java.util.HashSet;
import java.util.Set;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.EnumType;
import jakarta.persistence.Enumerated;
import jakarta.persistence.Table;

import io.quarkiverse.renarde.security.RenardeUser;
import io.quarkus.hibernate.orm.panache.PanacheEntity;

@Entity
@Table(name = "user_table")
public class User extends PanacheEntity implements RenardeUser {

    @Column(nullable = false)
    public String email;
    @Column(unique = true)
    public String userName;
    public String password;
    public String firstName;
    public String lastName;
    public boolean isAdmin;

    @Column(unique = true)
    public String confirmationCode;

    @Column(nullable = false)
    @Enumerated(EnumType.STRING)
    public UserStatus status;

    public boolean isRegistered(){
        return status == UserStatus.REGISTERED;
    }

    @Override
    public Set&lt;String&gt; getRoles() {
        Set&lt;String&gt; roles = new HashSet&lt;&gt;();
        if(isAdmin) {
            roles.add("admin");
        }
        return roles;
    }

    @Override
    public String getUserId() {
        return userName;
    }

    //
    // Helpers

    public static User findUnconfirmedByEmail(String email) {
        return find("LOWER(email) = ?1 AND status = ?2", email.toLowerCase(), UserStatus.CONFIRMATION_REQUIRED).firstResult();
    }

    public static User findRegisteredByUserName(String username) {
        return find("LOWER(userName) = ?1 AND status = ?2", username.toLowerCase(), UserStatus.REGISTERED).firstResult();
    }

    public static User findByUserName(String username) {
        return find("LOWER(userName) = ?1", username.toLowerCase()).firstResult();
    }

    public static User findForContirmation(String confirmationCode) {
        return find("confirmationCode = ?1 AND status = ?2", confirmationCode, UserStatus.CONFIRMATION_REQUIRED).firstResult();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now tell Renarde how to map the JWT cookies to your user model by implementing <code>RenardeUserProvider</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package util;

import jakarta.enterprise.context.ApplicationScoped;
import jakarta.inject.Inject;

import io.quarkiverse.renarde.security.RenardeSecurity;
import io.quarkiverse.renarde.security.RenardeUser;
import io.quarkiverse.renarde.security.RenardeUserProvider;
import model.User;

@ApplicationScoped
public class MySecuritySetup implements RenardeUserProvider {

    @Inject
    RenardeSecurity security;

    @Override
    public RenardeUser findUser(String tenantId, String id) {
        return User.findByUserName(id);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this, Renarde will make sure that we produce a <code>user</code> named bean containing the current user if there is a
logged-in user. You can then use it in your views with <code>inject:user</code> or by injecting it in
your endpoints.</p>
</div>
<div class="paragraph">
<p>Renarde also provides a <code>ControllerWithUser</code> class which you can extend to access the current user for all controllers
that need a user.</p>
</div>
<div class="paragraph">
<p>Now you can write your login and registration page like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">{#include main.html }
{#title}Login{/title}

&lt;div class="row"&gt;
  &lt;div class="col-md-5"&gt;
    {#form uri:Login.manualLogin()}
        &lt;fieldset&gt;
            &lt;legend&gt;Login&lt;/legend&gt;
            {#formElement name="userName" label="User Name"}
                {#input name="userName"/}
            {/formElement}
            {#formElement name="password" label="Password"}
                {#input name="password" type="password"/}
            {/formElement}
            &lt;button type="submit" class="btn btn-primary"&gt;Login&lt;/button&gt;
        &lt;/fieldset&gt;
    {/form}
  &lt;/div&gt;
  &lt;div class="col-md-5"&gt;
    {#form uri:Login.register()}
        &lt;fieldset&gt;
            &lt;legend&gt;Register&lt;/legend&gt;
            {#formElement name="email" label="Email"}
                {#input name="email"/}
            {/formElement}
            &lt;button type="submit" class="btn btn-primary"&gt;Register&lt;/button&gt;
        &lt;/fieldset&gt;
    {/form}
  &lt;/div&gt;
&lt;/div&gt;

{/include}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As for your registration page, it can look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">{#include main.html }
{#title}Complete registration{/title}

{#form uri:Login.complete(newUser.confirmationCode)}

&lt;fieldset&gt;
    &lt;legend&gt;Complete registration for {newUser.email}&lt;/legend&gt;
    {#formElement name="userName" label="User Name"}
        {#input name="userName" value=newUser.userName/}
    {/formElement}
    {#formElement name="password" label="Password"}
        {#input name="password" type="password"/}
    {/formElement}
    {#formElement name="password2" label="Password Confirmation"}
        {#input name="password2" type="password"/}
    {/formElement}
    {#formElement name="firstName" label="First Name"}
        {#input name="firstName" value=newUser.firstName/}
    {/formElement}
    {#formElement name="lastName" label="Last Name"}
        {#input name="lastName" value=newUser.lastName/}
    {/formElement}
    &lt;button type="submit" class="btn btn-primary"&gt;Complete registration&lt;/button&gt;
&lt;/fieldset&gt;

{/form}
{/include}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And your login and registration endpoint can look like this to handle user registration and login:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package rest;

import java.util.UUID;

import jakarta.inject.Inject;
import jakarta.validation.constraints.Email;
import jakarta.validation.constraints.NotBlank;
import jakarta.ws.rs.POST;
import jakarta.ws.rs.core.NewCookie;
import jakarta.ws.rs.core.Response;
import jakarta.ws.rs.core.Response.ResponseBuilder;

import org.hibernate.validator.constraints.Length;
import org.jboss.resteasy.reactive.RestForm;
import org.jboss.resteasy.reactive.RestQuery;

import email.Emails;
import io.quarkiverse.renarde.security.RenardeSecurity;
import io.quarkiverse.renarde.router.Router;
import io.quarkiverse.renarde.util.StringUtils;
import io.quarkus.elytron.security.common.BcryptUtil;
import io.quarkus.qute.CheckedTemplate;
import io.quarkus.qute.TemplateInstance;
import io.quarkus.security.Authenticated;
import model.User;
import model.UserStatus;

public class Login extends ControllerWithUser&lt;User&gt; {

    @Inject
    RenardeSecurity security;

    @CheckedTemplate
    static class Templates {
        public static native TemplateInstance login();
        public static native TemplateInstance register(String email);
        public static native TemplateInstance confirm(User newUser);
        public static native TemplateInstance logoutFirst();
        public static native TemplateInstance welcome();
    }

    /**
     * Login page
     */
    public TemplateInstance login() {
        return Templates.login();
    }

    /**
     * Welcome page at the end of registration
     */
    @Authenticated
    public TemplateInstance welcome() {
        return Templates.welcome();
    }

    /**
     * Manual login form
     */
    @POST
    public Response manualLogin(@NotBlank @RestForm String userName,
            @NotBlank @RestForm String password) {
        if(validationFailed()) {
            login();
        }
        User user = User.findRegisteredByUserName(userName);
        if(user == null
                || !BcryptUtil.matches(password, user.password)) {
            validation.addError("userName", "Invalid username/pasword");
            prepareForErrorRedirect();
            login();
        }
        NewCookie cookie = security.makeUserCookie(user);
        return Response.seeOther(Router.getURI(Application::index)).cookie(cookie).build();
    }


    /**
     * Manual registration form, sends confirmation email
     */
    @POST
    public TemplateInstance register(@RestForm @NotBlank @Email String email) {
        if(validationFailed())
            login();
        User newUser = User.findUnconfirmedByEmail(email);
        if(newUser == null) {
            newUser = new User();
            newUser.email = email;
            newUser.status = UserStatus.CONFIRMATION_REQUIRED;
            newUser.confirmationCode = UUID.randomUUID().toString();
            newUser.persist();
        }
        // send the confirmation code again
        Emails.confirm(newUser);
        return Templates.register(email);
    }


    /**
     * Confirmation form, once email is verified, to add user info
     */
    public TemplateInstance confirm(@RestQuery String confirmationCode){
        checkLogoutFirst();
        User newUser = checkConfirmationCode(confirmationCode);
        return Templates.confirm(newUser);
    }

    private void checkLogoutFirst() {
        if(getUser() != null) {
            logoutFirst();
        }
    }

    /**
     * Link to logout page
     */
    public TemplateInstance logoutFirst() {
        return Templates.logoutFirst();
    }

    private User checkConfirmationCode(String confirmationCode) {
        // can't use error reporting as those are query parameters and not form fields
        if(StringUtils.isEmpty(confirmationCode)){
            flash("message", "Missing confirmation code");
            flash("messageType", "error");
            redirect(Application.class).index();
        }
        User user = User.findForContirmation(confirmationCode);
        if(user == null){
            flash("message", "Invalid confirmation code");
            flash("messageType", "error");
            redirect(Application.class).index();
        }
        return user;
    }

    @POST
    public Response complete(@RestQuery String confirmationCode,
            @RestForm @NotBlank String userName,
            @RestForm @Length(min = 8) String password,
            @RestForm @Length(min = 8) String password2,
            @RestForm @NotBlank String firstName,
            @RestForm @NotBlank String lastName) {
        checkLogoutFirst();
        User user = checkConfirmationCode(confirmationCode);

        if(validationFailed())
            confirm(confirmationCode);

        validation.required("password", password);
        validation.required("password2", password2);
        validation.equals("password", password, password2);

        if(User.findRegisteredByUserName(userName) != null)
            validation.addError("userName", "User name already taken");
        if(validationFailed())
            confirm(confirmationCode);

        user.userName = userName;
        user.password = BcryptUtil.bcryptHash(password);
        user.firstName = firstName;
        user.lastName = lastName;
        user.confirmationCode = null;
        user.status = UserStatus.REGISTERED;

        ResponseBuilder responseBuilder = Response.seeOther(Router.getURI(Login::welcome));
        NewCookie cookie = security.makeUserCookie(user);
        responseBuilder.cookie(cookie);
        return responseBuilder.build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now use the <code>@Authenticated</code> and <code>@RolesAllowed("admin")</code> annotations on your endpoints.</p>
</div>
<div class="sect2">
<h3 id="_privatepublic_keys"><a class="anchor" href="#_privatepublic_keys"></a>Private/public keys</h3>
<div class="paragraph">
<p>In DEV mode, your private/public keys will be generated for you at startup if they do not exist and
are not specified. Cleaning your project will remove those keys, so previous JWT tokens won&#8217;t be valid
anymore on restart.</p>
</div>
<div class="paragraph">
<p>In production environments you will need to generate and specify your private and public keys using the following
commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ openssl genrsa -out rsaPrivateKey.pem 2048
$ openssl rsa -pubout -in rsaPrivateKey.pem -out src/main/resources/publicKey.pem
$ openssl pkcs8 -topk8 -nocrypt -inform pem -in rsaPrivateKey.pem -outform pem -out src/main/resources/privateKey.pem</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can then point to those files in your <code>application.properties</code> Quarkus configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">mp.jwt.verify.publickey.location=publicKey.pem
mp.jwt.decrypt.key.location=privateKey.pem
smallrye.jwt.sign.key.location=privateKey.pem
smallrye.jwt.encrypt.key.location=publicKey.pem

quarkus.native.resources.includes=publicKey.pem
quarkus.native.resources.includes=privateKey.pem</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oidc"><a class="anchor" href="#oidc"></a>Using OIDC for login</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OIDC (Open ID Connect) is a way to delegate user login to external services, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#setting-up-oidc-for-apple">Apple</a></p>
</li>
<li>
<p><a href="#setting-up-oidc-for-github">Github</a></p>
</li>
<li>
<p><a href="#setting-up-oidc-for-google">Google</a></p>
</li>
<li>
<p><a href="#setting-up-oidc-for-facebook">Facebook</a></p>
</li>
<li>
<p><a href="#setting-up-oidc-for-microsoft">Microsoft</a></p>
</li>
<li>
<p><a href="#setting-up-oidc-for-spotify">Spotify</a></p>
</li>
<li>
<p><a href="#setting-up-oidc-for-twitter">Twitter</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you use OIDC, you can skip the email validation phase, and avoid storing passwords for your users, but you may
likely still need to store a user representation in your data store, and associate it to the external identity provider
using the provider name and its own ID.</p>
</div>
<div class="paragraph">
<p>The recommended set up is to place each provider in its own tenant, and disable the default tenant if you want to leave
it free for the manual user registration and authentication we already covered:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Google
quarkus.oidc.google.provider=google
quarkus.oidc.google.client-id=SECRET
quarkus.oidc.google.credentials.secret=SECRET

# Github
quarkus.oidc.github.provider=github
quarkus.oidc.github.client-id=SECRET
quarkus.oidc.github.credentials.secret=SECRET

# Manual context
quarkus.oidc.manual.tenant-enabled=false

# Default is just disabled
quarkus.oidc.tenant-enabled=false

# Get rid of keycloak dev services
quarkus.keycloak.devservices.enabled=false

# Must be set to get proper error reporting
quarkus.http.auth.proactive=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>Make sure you import the <code>renarde-oidc</code> module in your <code>pom.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;io.quarkiverse.renarde&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-renarde-oidc&lt;/artifactId&gt;
  &lt;version&gt;3.0.7&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>We first adapt our <code>User</code> model to handle OIDC users by adding <code>tenantId</code> and <code>authId</code> fields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package model;

import java.util.HashSet;
import java.util.Set;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.EnumType;
import jakarta.persistence.Enumerated;
import jakarta.persistence.Table;
import jakarta.persistence.UniqueConstraint;

import io.quarkiverse.renarde.security.RenardeUser;
import io.quarkus.hibernate.orm.panache.PanacheEntity;

@Entity
@Table(name = "user_table", uniqueConstraints = @UniqueConstraint(columnNames = {"tenantId", "authId"}))
public class User extends PanacheEntity implements RenardeUser {

    @Column(nullable = false)
    public String email;
    @Column(unique = true)
    public String userName;
    public String password;
    public String firstName;
    public String lastName;
    public boolean isAdmin;

    @Column(unique = true)
    public String confirmationCode;

    public String tenantId;
    public String authId;

    @Column(nullable = false)
    @Enumerated(EnumType.STRING)
    public UserStatus status;

    public boolean isRegistered(){
        return status == UserStatus.REGISTERED;
    }

    @Override
    public Set&lt;String&gt; getRoles() {
        Set&lt;String&gt; roles = new HashSet&lt;&gt;();
        if(isAdmin) {
            roles.add("admin");
        }
        return roles;
    }

    @Override
    public String getUserId() {
        return userName;
    }

    public boolean isOidc() {
        return tenantId != null;
    }

    //
    // Helpers

    public static User findUnconfirmedByEmail(String email) {
        return find("LOWER(email) = ?1 AND status = ?2", email.toLowerCase(), UserStatus.CONFIRMATION_REQUIRED).firstResult();
    }

    public static User findRegisteredByUserName(String username) {
        return find("LOWER(userName) = ?1 AND status = ?2", username.toLowerCase(), UserStatus.REGISTERED).firstResult();
    }

    public static User findByUserName(String username) {
        return find("LOWER(userName) = ?1", username.toLowerCase()).firstResult();
    }

    public static User findByAuthId(String tenantId, String authId) {
        return find("tenantId = ?1 AND authId = ?2", tenantId, authId).firstResult();
    }

    public static User findForContirmation(String confirmationCode) {
        return find("confirmationCode = ?1 AND status = ?2", confirmationCode, UserStatus.CONFIRMATION_REQUIRED).firstResult();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you need to provide implementations of <code>RenardeUserProvider</code> and <code>RenardeOidcHandler</code> which you can group:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package util;

import java.net.URI;
import java.util.UUID;

import jakarta.enterprise.context.ApplicationScoped;
import jakarta.inject.Inject;
import jakarta.transaction.Transactional;
import jakarta.ws.rs.core.Response;

import io.quarkiverse.renarde.oidc.RenardeOidcHandler;
import io.quarkiverse.renarde.oidc.RenardeOidcSecurity;
import io.quarkiverse.renarde.security.RenardeSecurity;
import io.quarkiverse.renarde.security.RenardeUser;
import io.quarkiverse.renarde.security.RenardeUserProvider;
import io.quarkiverse.renarde.router.Router;
import io.quarkiverse.renarde.util.Flash;
import io.quarkiverse.renarde.util.RedirectException;
import model.User;
import model.UserStatus;
import rest.Application;
import rest.Login;

@ApplicationScoped
public class MySecuritySetup implements RenardeUserProvider, RenardeOidcHandler {

    @Inject
    RenardeSecurity security;

    @Inject
    RenardeOidcSecurity oidcSecurity;

    @Inject
    Flash flash;

    /**
     * This allows us to map tenant/id to our users: manually or via OIDC
     */
    @Override
    public RenardeUser findUser(String tenantId, String id) {
        if(tenantId == null || tenantId.equals("manual")) {
            return User.findByUserName(id);
        } else {
            return User.findByAuthId(tenantId, id);
        }
    }

    /**
     * This will be called on every successful OIDC authentication,
     * be it a first-time user registration, or existing user login
     */
    @Transactional
    @Override
    public void oidcSuccess(String tenantId, String authId) {
        User user = User.findByAuthId(tenantId, authId);
        URI uri;
        if(user == null) {
            // registration
            user = new User();
            user.tenantId = tenantId;
            user.authId = authId;

            user.email = oidcSecurity.getOidcEmail();
            user.firstName = oidcSecurity.getOidcFirstName();
            user.lastName = oidcSecurity.getOidcLastName();
            user.userName = oidcSecurity.getOidcUserName();

            user.status = UserStatus.CONFIRMATION_REQUIRED;
            user.confirmationCode = UUID.randomUUID().toString();
            user.persist();

            // go to registration
            uri = Router.getURI(Login::confirm, user.confirmationCode);
        } else if(!user.isRegistered()) {
            // user exists, but not fully registered yet
            // go to registration
            uri = Router.getURI(Login::confirm, user.confirmationCode);
        } else {
            // regular login
            uri = Router.getURI(Application::index);
        }
        throw new RedirectException(Response.seeOther(uri).build());
    }

    /**
     * This will be called if the existing user has a valid OIDC session,
     * and attemps to login again, so we check if the user exists, and is
     * fully registered.
     */
    @Override
    public void loginWithOidcSession(String tenantId, String authId) {
        RenardeUser user = findUser(tenantId, authId);
        // old cookie, no such user
        if(user == null) {
            flash.flash("message", "Invalid user: "+authId);
            throw new RedirectException(security.makeLogoutResponse());
        }
        // redirect to registration
        URI uri;
        if(!user.isRegistered()) {
            uri = Router.getURI(Login::confirm, ((User)user).confirmationCode);
        } else {
            flash.flash("message", "Already logged in");
            uri = Router.getURI(Application::index);
        }
        throw new RedirectException(Response.seeOther(uri).build());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We have to adapt our registration page to account for users coming in from OIDC, by skipping the password
if the user is an OIDC user:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">{#include main.html }
{#title}Complete registration{/title}

{#form uri:Login.complete(newUser.confirmationCode)}

&lt;fieldset&gt;
    &lt;legend&gt;Complete registration for {newUser.email}&lt;/legend&gt;
    {#formElement name="userName" label="User Name"}
        {#input name="userName" value=newUser.userName/}
    {/formElement}
    {#if !newUser.authId}
        {#formElement name="password" label="Password"}
            {#input name="password" type="password"/}
        {/formElement}
        {#formElement name="password2" label="Password Confirmation"}
            {#input name="password2" type="password"/}
        {/formElement}
    {/if}
    {#formElement name="firstName" label="First Name"}
        {#input name="firstName" value=newUser.firstName/}
    {/formElement}
    {#formElement name="lastName" label="Last Name"}
        {#input name="lastName" value=newUser.lastName/}
    {/formElement}
    &lt;button type="submit" class="btn btn-primary"&gt;Complete registration&lt;/button&gt;
&lt;/fieldset&gt;

{/form}
{/include}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the corresponding controller:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @POST
    public Response complete(@RestQuery String confirmationCode,
            @RestForm @NotBlank String userName,
            @RestForm @Length(min = 8) String password,
            @RestForm @Length(min = 8) String password2,
            @RestForm @NotBlank String firstName,
            @RestForm @NotBlank String lastName) {
        checkLogoutFirst();
        User user = checkConfirmationCode(confirmationCode);

        if(validationFailed())
            confirm(confirmationCode);

        // is it OIDC?
        if(!user.isOidc()) {
            validation.required("password", password);
            validation.required("password2", password2);
            validation.equals("password", password, password2);
        }

        if(User.findRegisteredByUserName(userName) != null)
            validation.addError("userName", "User name already taken");
        if(validationFailed())
            confirm(confirmationCode);

        user.userName = userName;
        if(!user.isOidc()) {
            user.password = BcryptUtil.bcryptHash(password);
        }
        user.firstName = firstName;
        user.lastName = lastName;
        user.confirmationCode = null;
        user.status = UserStatus.REGISTERED;

        ResponseBuilder responseBuilder = Response.seeOther(Router.getURI(Login::welcome));
        if(!user.isOidc()) {
            NewCookie cookie = security.makeUserCookie(user);
            responseBuilder.cookie(cookie);
        }
        return responseBuilder.build();
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>And finally we can add the OIDC login options to the login page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">{#include main.html }
{#title}Login{/title}

&lt;div class="row"&gt;
  &lt;div class="col-md-2"&gt;
    &lt;fieldset&gt;
        &lt;legend&gt;Login/Register&lt;/legend&gt;
        &lt;div class="d-grid gap-2"&gt;
          &lt;a class="btn btn-block btn-light" href="{uri:RenardeOidcController.loginUsingOidc('github')}" role="button"&gt;&lt;img src="/images/signin-github.svg" height="16px" style="vertical-align: text-top"/&gt; GitHub&lt;/a&gt;
          &lt;a class="btn btn-block btn-light" href="{uri:RenardeOidcController.loginUsingOidc('google')}" role="button"&gt;&lt;img src="/images/signin-google.svg" height="16px" style="vertical-align: text-top"/&gt; Google&lt;/a&gt;
          &lt;a class="btn btn-block btn-light" href="{uri:RenardeOidcController.loginUsingOidc('microsoft')}" role="button"&gt;&lt;img src="/images/signin-microsoft.svg" height="16px" style="vertical-align: text-top"/&gt; Microsoft&lt;/a&gt;
          &lt;a class="btn btn-block btn-light" href="{uri:RenardeOidcController.loginUsingOidc('facebook')}" role="button"&gt;&lt;img src="/images/signin-facebook.svg" height="16px" style="vertical-align: text-top"/&gt; Facebook&lt;/a&gt;
          &lt;a class="btn btn-block btn-light" href="{uri:RenardeOidcController.loginUsingOidc('apple')}" role="button"&gt;&lt;img src="/images/signin-apple.svg" height="16px" style="vertical-align: text-top"/&gt; Apple&lt;/a&gt;
          &lt;a class="btn btn-block btn-light" href="{uri:RenardeOidcController.loginUsingOidc('twitter')}" role="button"&gt;&lt;img src="/images/signin-twitter.svg" height="16px" style="vertical-align: text-top"/&gt; Twitter&lt;/a&gt;
        &lt;/div&gt;
     &lt;/fieldset&gt;
  &lt;/div&gt;
  &lt;-- ... Manual login and registration ... --&gt;
&lt;/div&gt;

{/include}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_oidc_for_github"><a class="anchor" href="#_setting_up_oidc_for_github"></a>Setting up OIDC for Github</h3>
<div class="paragraph">
<p>In order to set up OIDC for Github you need to create a new OAuth application in your <a href="https://github.com/settings/applications/new">GitHub developer settings</a>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-github-1.png" alt="oidc github 1">
</div>
</div>
<div class="paragraph">
<p>Make sure to fill in the appropriate details, but more importantly the Authorization Callback URL, set to <code><a href="http://localhost:8080/_renarde/security/oidc-success" class="bare">http://localhost:8080/_renarde/security/oidc-success</a></code>
(if you intend to test this using the Quarkus DEV mode).</p>
</div>
<div class="paragraph">
<p>Now click on <code>Register application</code> and you&#8217;ll be shown your application page:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-github-2.png" alt="oidc github 2">
</div>
</div>
<div class="paragraph">
<p>You need to click on <code>Generate a new client secret</code>, confirm your credentials, and write down
your Client ID and Client secret (especially that one, because you will not be able to see it again
later from that page, but you can always recreate one, do don&#8217;t worry too much):</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-github-3.png" alt="oidc github 3">
</div>
</div>
<div class="paragraph">
<p>Now add the following configuration to your <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc.github.provider=github
quarkus.oidc.github.client-id=&lt;Client ID&gt;
quarkus.oidc.github.credentials.secret=&lt;Secret&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_oidc_for_google"><a class="anchor" href="#_setting_up_oidc_for_google"></a>Setting up OIDC for Google</h3>
<div class="paragraph">
<p>In order to set up OIDC for Google you need to create a new project in your <a href="https://console.cloud.google.com/projectcreate">Google Cloud Platform console</a>:</p>
</div>
<div class="paragraph">
<p>Pick a project name and click on <code>CREATE</code>.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-google-1.png" alt="oidc google 1">
</div>
</div>
<div class="paragraph">
<p>Now make sure you select your project in the top selector, and click on the left-hand bar menu on <code>APIs and Services &gt; OAuth consent screen</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-google-2.png" alt="oidc google 2">
</div>
</div>
<div class="paragraph">
<p>Select <code>External</code> to authorise any Google user to log in to your application and press <code>CREATE</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-google-3.png" alt="oidc google 3">
</div>
</div>
<div class="paragraph">
<p>Now you can fill in your application name, your support email, your developer contact information and press <code>SAVE AND CONTINUE</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-google-4.png" alt="oidc google 4">
</div>
</div>
<div class="paragraph">
<p>Do not add any scopes on the next page, and press <code>SAVE AND CONTINUE</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-google-5.png" alt="oidc google 5">
</div>
</div>
<div class="paragraph">
<p>Do not add any test user on the next page, and press <code>SAVE AND CONTINUE</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-google-6.png" alt="oidc google 6">
</div>
</div>
<div class="paragraph">
<p>Click on the top menu <code>CREATE CREDENTIALS</code> &gt; <code>OAuth client ID</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-google-7.png" alt="oidc google 7">
</div>
</div>
<div class="paragraph">
<p>Select <code>Web application</code> as <code>Application type</code>, and add <code><a href="http://localhost:8080/_renarde/security/oidc-success" class="bare">http://localhost:8080/_renarde/security/oidc-success</a></code> in
the <code>Authorised redirect URIs</code> list, then press <code>CREATE</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-google-8.png" alt="oidc google 8">
</div>
</div>
<div class="paragraph">
<p>Copy your Client ID and Client Secret:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-google-9.png" alt="oidc google 9">
</div>
</div>
<div class="paragraph">
<p>You can now configure your <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc.google.provider=google
quarkus.oidc.google.client-id=&lt;Client ID&gt;
quarkus.oidc.google.credentials.secret=&lt;Secret&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_oidc_for_microsoft"><a class="anchor" href="#_setting_up_oidc_for_microsoft"></a>Setting up OIDC for Microsoft</h3>
<div class="paragraph">
<p>In order to set up OIDC for Microsoft you need to go to your <a href="https://portal.azure.com">Microsoft Azure Portal</a>,
and search for <code>Azure Active Directory</code>, then click on it:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-microsoft-1.png" alt="oidc microsoft 1">
</div>
</div>
<div class="paragraph">
<p>Once there, on the left side under <code>Manage</code>, click on <code>App registrations</code> then click on <code>New registration</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-microsoft-2.png" alt="oidc microsoft 2">
</div>
</div>
<div class="paragraph">
<p>Fill in your application name, select <code>Accounts in any organizational directory (Any Azure AD directory - Multitenant) and personal Microsoft accounts (e.g. Skype, Xbox)</code> to allow anyone to log in, and add a <code>Web</code> Redirect URI as <code><a href="http://localhost:8080/_renarde/security/oidc-success" class="bare">http://localhost:8080/_renarde/security/oidc-success</a></code>,
then click on <code>Register</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-microsoft-3.png" alt="oidc microsoft 3">
</div>
</div>
<div class="paragraph">
<p>On that resulting page, copy the <code>Client Id</code> (under <code>Application (client) ID</code>, then click on <code>Add a certificate or secret</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-microsoft-4.png" alt="oidc microsoft 4">
</div>
</div>
<div class="paragraph">
<p>Now, under <code>Client secrets (0)</code>, click on <code>New client secret</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-microsoft-5.png" alt="oidc microsoft 5">
</div>
</div>
<div class="paragraph">
<p>Click on <code>Add</code> in that dialog without changing anything:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-microsoft-6.png" alt="oidc microsoft 6">
</div>
</div>
<div class="paragraph">
<p>On the resulting page, copy your <code>Secret ID</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-microsoft-7.png" alt="oidc microsoft 7">
</div>
</div>
<div class="paragraph">
<p>You can now configure your <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc.microsoft.provider=microsoft
quarkus.oidc.microsoft.client-id=&lt;Client ID&gt;
quarkus.oidc.microsoft.credentials.secret=&lt;Secret&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_oidc_for_apple"><a class="anchor" href="#_setting_up_oidc_for_apple"></a>Setting up OIDC for Apple</h3>
<div class="paragraph">
<p>In order to set up OIDC for Apple you need to create a developer account, and sign up for the 99/year program, but you cannot test your application on <code>localhost</code> like most other OIDC providers:
you will need to run it over <code>https</code> and make it publicly accessible, so for development purposes
you may want to use a service such as <a href="https://github.com/quarkiverse/quarkus-ngrok">ngrok</a>.</p>
</div>
<div class="paragraph">
<p>Go to <a href="https://developer.apple.com/account/resources/identifiers/list">Create a new identifier</a> and press <code>+</code></p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-1.png" alt="oidc apple 1">
</div>
</div>
<div class="paragraph">
<p>Dont touch anything, keep <code>App IDs</code> selected, and press <code>Continue</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-2.png" alt="oidc apple 2">
</div>
</div>
<div class="paragraph">
<p>Dont touch anything, keep <code>App</code> selected, and press <code>Continue</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-3.png" alt="oidc apple 3">
</div>
</div>
<div class="paragraph">
<p>Enter a description and a Bundle ID (use your application package name):</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-4.png" alt="oidc apple 4">
</div>
</div>
<div class="paragraph">
<p>Then scroll down to find the <code>Sign in with Apple</code> Capability, select it, and press <code>Continue</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-5.png" alt="oidc apple 5">
</div>
</div>
<div class="paragraph">
<p>Write down your App ID Prefix, then press <code>Register</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-6.png" alt="oidc apple 6">
</div>
</div>
<div class="paragraph">
<p>Back on the <code>Identifiers</code> page, press <code>+</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-7.png" alt="oidc apple 7">
</div>
</div>
<div class="paragraph">
<p>Select <code>Service IDs</code> and press <code>Continue</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-8.png" alt="oidc apple 8">
</div>
</div>
<div class="paragraph">
<p>Enter a description and Bundle ID (use your application package name), then press <code>Continue</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-9.png" alt="oidc apple 9">
</div>
</div>
<div class="paragraph">
<p>Now press <code>Register</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-10.png" alt="oidc apple 10">
</div>
</div>
<div class="paragraph">
<p>Back on the service list, click on your newly created service:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-11.png" alt="oidc apple 11">
</div>
</div>
<div class="paragraph">
<p>Enable <code>Sign in with Apple</code> and press <code>Configure</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-12.png" alt="oidc apple 12">
</div>
</div>
<div class="paragraph">
<p>Add your domain and return URL (set to <code>&lt;host&gt;/_renarde/security/oidc-success</code>) and press <code>Next</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-13.png" alt="oidc apple 13">
</div>
</div>
<div class="paragraph">
<p>Now press <code>Done</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-14.png" alt="oidc apple 14">
</div>
</div>
<div class="paragraph">
<p>Now press <code>Continue</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-15.png" alt="oidc apple 15">
</div>
</div>
<div class="paragraph">
<p>And now press <code>Save</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-16.png" alt="oidc apple 16">
</div>
</div>
<div class="paragraph">
<p>Go to the <a href="https://developer.apple.com/account/resources/authkeys/list">Keys</a> page on the left menu, and press <code>+</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-17.png" alt="oidc apple 17">
</div>
</div>
<div class="paragraph">
<p>Fill in a key name, enable <code>Sign in with Apple</code>, and press <code>Configure</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-18.png" alt="oidc apple 18">
</div>
</div>
<div class="paragraph">
<p>Select your Primary App ID and press <code>Save</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-19.png" alt="oidc apple 19">
</div>
</div>
<div class="paragraph">
<p>Back on the key page, press <code>Continue</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-20.png" alt="oidc apple 20">
</div>
</div>
<div class="paragraph">
<p>Now press <code>Register</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-21.png" alt="oidc apple 21">
</div>
</div>
<div class="paragraph">
<p>Write down your <code>Key ID</code>, download your key and save it to your Quarkus application in <code>src/main/resources/AuthKey_&lt;KEYID&gt;.p8</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-apple-22.png" alt="oidc apple 22">
</div>
</div>
<div class="paragraph">
<p>You can now configure your <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc.apple.provider=apple
quarkus.oidc.apple.client-id=&lt;Bundle ID&gt;
quarkus.oidc.apple.credentials.jwt.key-file=AuthKey_&lt;Key ID&gt;.p8
quarkus.oidc.apple.credentials.jwt.token-key-id=&lt;Key ID&gt;
quarkus.oidc.apple.credentials.jwt.issuer=&lt;App ID Prefix&gt;
quarkus.oidc.apple.credentials.jwt.subject=&lt;Bundle ID}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_oidc_for_facebook"><a class="anchor" href="#_setting_up_oidc_for_facebook"></a>Setting up OIDC for Facebook</h3>
<div class="paragraph">
<p>Facebook you will not be let you test your application on <code>localhost</code> like most other OIDC providers:
you will need to run it over <code>https</code> and make it publicly accessible, so for development purposes
you may want to use a service such as <a href="https://github.com/quarkiverse/quarkus-ngrok">ngrok</a>.</p>
</div>
<div class="paragraph">
<p>In order to set up OIDC for Facebook start by <a href="https://developers.facebook.com/apps/create/">Creating an application</a>, select <code>None</code> as an app type, and press <code>Next</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-facebook-1.png" alt="oidc facebook 1">
</div>
</div>
<div class="paragraph">
<p>Now enter an application name, and contact email, and press <code>Create app</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-facebook-2.png" alt="oidc facebook 2">
</div>
</div>
<div class="paragraph">
<p>On the app page, click <code>Set up</code> on the <code>Facebook login</code> product:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-facebook-3.png" alt="oidc facebook 3">
</div>
</div>
<div class="paragraph">
<p>Quick the <code>Quickstarts</code> page and click on <code>Facebook login &gt; Settings</code> on the left menu:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-facebook-4.png" alt="oidc facebook 4">
</div>
</div>
<div class="paragraph">
<p>Enter your <code>Redirect URIs</code> (set to <code>&lt;host&gt;/_renarde/security/oidc-success</code>) and press <code>Save changes</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-facebook-5.png" alt="oidc facebook 5">
</div>
</div>
<div class="paragraph">
<p>Now go to <code>Settings &gt; Basic</code> on the left hand menu, and write down your <code>App ID</code> and <code>App secret</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-facebook-6.png" alt="oidc facebook 6">
</div>
</div>
<div class="paragraph">
<p>You can now configure your <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc.facebook.provider=facebook
quarkus.oidc.facebook.client-id=&lt;App ID&gt;
quarkus.oidc.facebook.credentials.secret=&lt;App secret&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_oidc_for_spotify"><a class="anchor" href="#_setting_up_oidc_for_spotify"></a>Setting up OIDC for Spotify</h3>
<div class="paragraph">
<p>In order to set up OIDC for Spotify start by <a href="https://developer.spotify.com/dashboard/create">Creating an app</a>, enter an app name,
and <code><a href="http://localhost:8080/_renarde/security/oidc-success" class="bare">http://localhost:8080/_renarde/security/oidc-success</a></code> as <code>Redirect URI</code>, check the checkbox accepting the terms,
and press <code>Save</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-spotify-1.png" alt="oidc spotify 1">
</div>
</div>
<div class="paragraph">
<p>Now click on <code>Settings</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-spotify-2.png" alt="oidc spotify 2">
</div>
</div>
<div class="paragraph">
<p>And click on <code>View client secret</code> in order to reveal your secret:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-spotify-3.png" alt="oidc spotify 3">
</div>
</div>
<div class="paragraph">
<p>Now copy your <code>Client ID</code> and <code>Client secret</code> into your <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc.spotify.provider=spotify
quarkus.oidc.spotify.client-id=&lt;Client ID&gt;
quarkus.oidc.spotify.credentials.secret=&lt;Client Secret&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_oidc_for_twitter"><a class="anchor" href="#_setting_up_oidc_for_twitter"></a>Setting up OIDC for Twitter</h3>
<div class="paragraph">
<p>You can use Twitter for OIDC login, but at the moment, it restricts access to the user&#8217;s email, which means you
will have to obtain it and verify it yourself.</p>
</div>
<div class="paragraph">
<p>In order to set up OIDC for Twitter start by <a href="https://developer.twitter.com/en/portal/projects/new">Creating a project</a>, enter a project name, and press <code>Next</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-twitter-1.png" alt="oidc twitter 1">
</div>
</div>
<div class="paragraph">
<p>Enter a use case, and press <code>Next</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-twitter-2.png" alt="oidc twitter 2">
</div>
</div>
<div class="paragraph">
<p>Enter a project description, and press <code>Next</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-twitter-3.png" alt="oidc twitter 3">
</div>
</div>
<div class="paragraph">
<p>Now enter an application name, and press <code>Next</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-twitter-4.png" alt="oidc twitter 4">
</div>
</div>
<div class="paragraph">
<p>Write down your keys, because they will not be displayed again, and press <code>App Settings</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-twitter-5.png" alt="oidc twitter 5">
</div>
</div>
<div class="paragraph">
<p>Navigate down to the <code>User authentication settings</code> section and press <code>Set up</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-twitter-6.png" alt="oidc twitter 6">
</div>
</div>
<div class="paragraph">
<p>Check the <code>OAuth 2.0</code> check box:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-twitter-7.png" alt="oidc twitter 7">
</div>
</div>
<div class="paragraph">
<p>Select <code>Web App</code> as application type, then fill in your application details (use <code>&lt;host&gt;/_renarde/security/oidc-success</code>
for the <code>Callback URI</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Twitter doesn&#8217;t require https usage in practice, but won&#8217;t accept your <code>Website URL</code> without it, so
you can still use <a href="https://github.com/quarkiverse/quarkus-ngrok">ngrok</a> for it.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now press <code>Save</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-twitter-8.png" alt="oidc twitter 8">
</div>
</div>
<div class="paragraph">
<p>You can now copy your <code>Client ID</code> and <code>Client Secret</code> and press <code>Done</code>:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="_images/oidc-twitter-9.png" alt="oidc twitter 9">
</div>
</div>
<div class="paragraph">
<p>You can now configure your <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc.twitter.provider=twitter
quarkus.oidc.twitter.client-id=&lt;Client ID&gt;
quarkus.oidc.twitter.credentials.secret=&lt;Client Secret&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing_oidc_providers"><a class="anchor" href="#_testing_oidc_providers"></a>Testing OIDC providers</h3>
<div class="paragraph">
<p>As soon as you integrate OIDC providers in your application, testing them becomes problematic,
because you probably don&#8217;t want to hit those external OIDC systems from your tests. But you still
want to test that your integration works well, and make it as fast as possible.</p>
</div>
<div class="paragraph">
<p>Renarde provides you with <a href="https://quarkus.io/guides/getting-started-testing#annotation-based-test-resources">custom test resources</a>
that will start mock OIDC providers that you can use in place of the real online OIDC providers. All you need to
do is import this module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;io.quarkiverse.renarde&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-renarde-oidc-tests&lt;/artifactId&gt;
  &lt;version&gt;3.0.7&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>And place one of these annotations on your test resource:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Annotation</th>
<th class="tableblock halign-left valign-top">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@MockAppleOidc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Starts a mock Apple OIDC provider</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@MockFacebookOidc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Starts a mock Facebook OIDC provider</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@MockGithubOidc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Starts a mock Github OIDC provider</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@MockGoogleOidc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Starts a mock Google OIDC provider</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@MockMicrosoftOidc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Starts a mock Microsoft OIDC provider</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@MockSpotifyOidc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Starts a mock Spotify OIDC provider</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@MockTwitterOidc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Starts a mock Twitter OIDC provider</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All these mock OIDC providers will automatically log you in for a single fixed user with the following
properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Provider</th>
<th class="tableblock halign-left valign-top">TenantId</th>
<th class="tableblock halign-left valign-top">AuthId</th>
<th class="tableblock halign-left valign-top">Username</th>
<th class="tableblock halign-left valign-top">First name</th>
<th class="tableblock halign-left valign-top">Last name</th>
<th class="tableblock halign-left valign-top">Email</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apple</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>apple</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>USERID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code> (Not provided by Apple)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code> (Not provided by Apple)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code> (Not provided by Apple)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>apple@example.com</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Facebook</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>facebook</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>USERID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code> (Not provided by Facebook)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Foo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>facebook@example.com</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Github</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>github</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1234</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GithubUser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Foo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>github@example.com</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Google</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>google</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>USERID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code> (Not provided by Google)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Foo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>google@example.com</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Microsoft</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>microsoft</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>USERID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>microsoft@example.com</code> (Microsoft uses the email)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Foo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>microsoft@example.com</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spotify</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spotify</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>USERID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code> (Not provided by Spotify)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Foo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spotify@example.com</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Twitter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>twitter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>USERID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code> (Not provided by Twitter)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Foo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>twitter@example.com</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright (C) 2020-2024 <a href="https://www.redhat.com">Red Hat</a> and individual contributors to <a href="https://github.com/quarkiverse/">Quarkiverse</a>.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../_/js/vendor/fontawesome.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
